<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Tue Dec 14 19:11:32 GMT 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
Mp4TagWriter (jaudiotagger 2.0.4-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2010-12-14">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Mp4TagWriter (jaudiotagger 2.0.4-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagReader.html" title="class in org.jaudiotagger.audio.mp4"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/jaudiotagger/audio/mp4/Mp4TagWriter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Mp4TagWriter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.jaudiotagger.audio.mp4</FONT>
<BR>
Class Mp4TagWriter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.jaudiotagger.audio.mp4.Mp4TagWriter</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>Mp4TagWriter</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Writes metadata from mp4, the metadata tags are held under the ilst atom as shown below, (note all free atoms are
 optional).
 <p/>
 <p/>
 When writing changes the size of all the atoms upto ilst has to be recalculated, then if the size of
 the metadata is increased the size of the free atom (below meta) should be reduced accordingly or vice versa.
 If the size of the metadata has increased by more than the size of the free atom then the size of meta, udta
 and moov should be recalculated and the top level free atom reduced accordingly
 If there is not enough space even if using both of the free atoms, then the mdat atom has to be shifted down
 accordingly to make space, and the stco atom has to have its offsets to mdat chunks table adjusted accordingly.

 Exceptions are that the meta/udta/ilst do not currently exist, in which udta/meta/ilst are created. Note it is valid
 to have meta/ilst without udta but this is less common so we always try to write files according to the Apple/iTunes
 specification. *
 <p/>
 <p/>
 <pre>
 |--- ftyp
 |--- free
 |--- moov
 |......|
 |......|----- mvdh
 |......|----- trak
 |......|----- udta
 |..............|
 |..............|-- meta
 |....................|
 |....................|-- hdlr
 |....................|-- ilst
 |....................|.. ..|
 |....................|.....|---- @nam (Optional for each metadatafield)
 |....................|.....|.......|-- data
 |....................|.....|....... ecetera
 |....................|.....|---- ---- (Optional for reverse dns field)
 |....................|.............|-- mean
 |....................|.............|-- name
 |....................|.............|-- data
 |....................|................ ecetere
 |....................|-- free
 |--- free
 |--- mdat
 </pre>
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.logging.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#logger">logger</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;<A HREF="../../../../org/jaudiotagger/tag/mp4/Mp4TagCreator.html" title="class in org.jaudiotagger.tag.mp4">Mp4TagCreator</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#tc">tc</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#Mp4TagWriter()">Mp4TagWriter</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#adjustSizeOfMoovHeader(org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.ByteBuffer, int, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">adjustSizeOfMoovHeader</A></B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;moovHeader,
                       java.nio.ByteBuffer&nbsp;moovBuffer,
                       int&nbsp;sizeAdjustment,
                       <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;udtaHeader,
                       <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;metaHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When the size of the metadata has changed and it cant be compensated for by free atom
 we have to adjust the size of the size field upto the moovheader level for the udta atom and
 its child meta atom.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#checkFileWrittenCorrectly(java.io.RandomAccessFile, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4StcoBox)">checkFileWrittenCorrectly</A></B>(java.io.RandomAccessFile&nbsp;rafTemp,
                          <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;mdatHeader,
                          java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                          <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4StcoBox.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4StcoBox</A>&nbsp;stco)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check File Written Correctly</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#convertandWriteTagsAtomToFreeAtom(java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">convertandWriteTagsAtomToFreeAtom</A></B>(java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                  <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replace tags atom (and children) by a free atom</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#createMetadataAtoms(org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.ByteBuffer, int, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">createMetadataAtoms</A></B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;moovHeader,
                    java.nio.ByteBuffer&nbsp;moovBuffer,
                    int&nbsp;sizeAdjustment,
                    <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;udtaHeader,
                    <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;metaHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#delete(java.io.RandomAccessFile, java.io.RandomAccessFile)">delete</A></B>(java.io.RandomAccessFile&nbsp;raf,
       java.io.RandomAccessFile&nbsp;rafTemp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete the tag
 <p/>
 <p/></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#getMetaLevelFreeAtomSize(org.jaudiotagger.audio.mp4.Mp4AtomTree)">getMetaLevelFreeAtomSize</A></B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4AtomTree.html" title="class in org.jaudiotagger.audio.mp4">Mp4AtomTree</A>&nbsp;atomTree)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determine the size of the free atom immediately after ilst atom at the same level (if any), we can use this if
 ilst needs to grow or shrink because of more less metadata</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#write(org.jaudiotagger.tag.Tag, java.io.RandomAccessFile, java.io.RandomAccessFile)">write</A></B>(<A HREF="../../../../org/jaudiotagger/tag/Tag.html" title="interface in org.jaudiotagger.tag">Tag</A>&nbsp;tag,
      java.io.RandomAccessFile&nbsp;raf,
      java.io.RandomAccessFile&nbsp;rafTemp)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write tag to rafTemp file</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#writeDataAfterIlst(java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">writeDataAfterIlst</A></B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
                   java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                   <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write data after ilst upto the end of the file</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#writeDataUptoIncludingIlst(java.nio.channels.FileChannel, java.nio.channels.FileChannel, int, int, java.nio.ByteBuffer)">writeDataUptoIncludingIlst</A></B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
                           java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                           int&nbsp;oldIlstSize,
                           int&nbsp;startIlstWithinFile,
                           java.nio.ByteBuffer&nbsp;rawIlstData)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write the data including new ilst</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#writeMetadataSameSize(java.nio.ByteBuffer, long, long, java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">writeMetadataSameSize</A></B>(java.nio.ByteBuffer&nbsp;rawIlstData,
                      long&nbsp;oldIlstSize,
                      long&nbsp;startIstWithinFile,
                      java.nio.channels.FileChannel&nbsp;fileReadChannel,
                      java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                      <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replace the ilst metadata
 <p/>
 Because it is the same size as the original data nothing else has to be modified</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagWriter.html#writeNeroData(java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)">writeNeroData</A></B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
              java.nio.channels.FileChannel&nbsp;fileWriteChannel,
              <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the existing files contains a tags atom and chp1 atom underneath the meta atom that means the file was
 encoded by Nero.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="logger"><!-- --></A><H3>
logger</H3>
<PRE>
public static java.util.logging.Logger <B>logger</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="tc"><!-- --></A><H3>
tc</H3>
<PRE>
private <A HREF="../../../../org/jaudiotagger/tag/mp4/Mp4TagCreator.html" title="class in org.jaudiotagger.tag.mp4">Mp4TagCreator</A> <B>tc</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Mp4TagWriter()"><!-- --></A><H3>
Mp4TagWriter</H3>
<PRE>
public <B>Mp4TagWriter</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="writeMetadataSameSize(java.nio.ByteBuffer, long, long, java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
writeMetadataSameSize</H3>
<PRE>
private void <B>writeMetadataSameSize</B>(java.nio.ByteBuffer&nbsp;rawIlstData,
                                   long&nbsp;oldIlstSize,
                                   long&nbsp;startIstWithinFile,
                                   java.nio.channels.FileChannel&nbsp;fileReadChannel,
                                   java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                   <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)
                            throws <A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A>,
                                   java.io.IOException</PRE>
<DL>
<DD>Replace the ilst metadata
 <p/>
 Because it is the same size as the original data nothing else has to be modified
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rawIlstData</CODE> - <DD><CODE>oldIlstSize</CODE> - <DD><CODE>startIstWithinFile</CODE> - <DD><CODE>fileReadChannel</CODE> - <DD><CODE>fileWriteChannel</CODE> - 
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A></CODE>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="writeNeroData(java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
writeNeroData</H3>
<PRE>
private void <B>writeNeroData</B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
                           java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                           <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)
                    throws java.io.IOException</PRE>
<DL>
<DD>If the existing files contains a tags atom and chp1 atom underneath the meta atom that means the file was
 encoded by Nero. Applications such as foobar read this non-standard tag before the more usual data within
 ilst causing problems. So the solution is to convert the tags atom and its children into a free atom whilst
 leaving the chp1 atom alone.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileReadChannel</CODE> - <DD><CODE>fileWriteChannel</CODE> - <DD><CODE>tagsHeader</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="adjustSizeOfMoovHeader(org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.ByteBuffer, int, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
adjustSizeOfMoovHeader</H3>
<PRE>
private void <B>adjustSizeOfMoovHeader</B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;moovHeader,
                                    java.nio.ByteBuffer&nbsp;moovBuffer,
                                    int&nbsp;sizeAdjustment,
                                    <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;udtaHeader,
                                    <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;metaHeader)
                             throws java.io.IOException</PRE>
<DL>
<DD>When the size of the metadata has changed and it cant be compensated for by free atom
 we have to adjust the size of the size field upto the moovheader level for the udta atom and
 its child meta atom.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>moovHeader</CODE> - <DD><CODE>moovBuffer</CODE> - <DD><CODE>sizeAdjustment</CODE> - can be negative or positive     *<DD><CODE>udtaHeader</CODE> - <DD><CODE>metaHeader</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createMetadataAtoms(org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.ByteBuffer, int, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
createMetadataAtoms</H3>
<PRE>
private void <B>createMetadataAtoms</B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;moovHeader,
                                 java.nio.ByteBuffer&nbsp;moovBuffer,
                                 int&nbsp;sizeAdjustment,
                                 <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;udtaHeader,
                                 <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;metaHeader)
                          throws java.io.IOException</PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="write(org.jaudiotagger.tag.Tag, java.io.RandomAccessFile, java.io.RandomAccessFile)"><!-- --></A><H3>
write</H3>
<PRE>
public void <B>write</B>(<A HREF="../../../../org/jaudiotagger/tag/Tag.html" title="interface in org.jaudiotagger.tag">Tag</A>&nbsp;tag,
                  java.io.RandomAccessFile&nbsp;raf,
                  java.io.RandomAccessFile&nbsp;rafTemp)
           throws <A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A>,
                  java.io.IOException</PRE>
<DL>
<DD>Write tag to rafTemp file
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tag</CODE> - tag data<DD><CODE>raf</CODE> - current file<DD><CODE>rafTemp</CODE> - temporary file for writing
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A></CODE>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="convertandWriteTagsAtomToFreeAtom(java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
convertandWriteTagsAtomToFreeAtom</H3>
<PRE>
private void <B>convertandWriteTagsAtomToFreeAtom</B>(java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                               <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)
                                        throws java.io.IOException</PRE>
<DL>
<DD>Replace tags atom (and children) by a free atom
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileWriteChannel</CODE> - <DD><CODE>tagsHeader</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="writeDataUptoIncludingIlst(java.nio.channels.FileChannel, java.nio.channels.FileChannel, int, int, java.nio.ByteBuffer)"><!-- --></A><H3>
writeDataUptoIncludingIlst</H3>
<PRE>
private void <B>writeDataUptoIncludingIlst</B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
                                        java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                        int&nbsp;oldIlstSize,
                                        int&nbsp;startIlstWithinFile,
                                        java.nio.ByteBuffer&nbsp;rawIlstData)
                                 throws java.io.IOException</PRE>
<DL>
<DD>Write the data including new ilst
 <p>can be used as long as we dont have to adjust the size of moov header
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileReadChannel</CODE> - <DD><CODE>fileWriteChannel</CODE> - <DD><CODE>oldIlstSize</CODE> - <DD><CODE>startIlstWithinFile</CODE> - <DD><CODE>rawIlstData</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="writeDataAfterIlst(java.nio.channels.FileChannel, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader)"><!-- --></A><H3>
writeDataAfterIlst</H3>
<PRE>
private void <B>writeDataAfterIlst</B>(java.nio.channels.FileChannel&nbsp;fileReadChannel,
                                java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;tagsHeader)
                         throws java.io.IOException</PRE>
<DL>
<DD>Write data after ilst upto the end of the file

 <p>Can be used if dont need to adjust size of moov header of modify top level free atoms
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileReadChannel</CODE> - <DD><CODE>fileWriteChannel</CODE> - <DD><CODE>tagsHeader</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getMetaLevelFreeAtomSize(org.jaudiotagger.audio.mp4.Mp4AtomTree)"><!-- --></A><H3>
getMetaLevelFreeAtomSize</H3>
<PRE>
private int <B>getMetaLevelFreeAtomSize</B>(<A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4AtomTree.html" title="class in org.jaudiotagger.audio.mp4">Mp4AtomTree</A>&nbsp;atomTree)</PRE>
<DL>
<DD>Determine the size of the free atom immediately after ilst atom at the same level (if any), we can use this if
 ilst needs to grow or shrink because of more less metadata
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>atomTree</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="checkFileWrittenCorrectly(java.io.RandomAccessFile, org.jaudiotagger.audio.mp4.atom.Mp4BoxHeader, java.nio.channels.FileChannel, org.jaudiotagger.audio.mp4.atom.Mp4StcoBox)"><!-- --></A><H3>
checkFileWrittenCorrectly</H3>
<PRE>
private void <B>checkFileWrittenCorrectly</B>(java.io.RandomAccessFile&nbsp;rafTemp,
                                       <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4BoxHeader.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4BoxHeader</A>&nbsp;mdatHeader,
                                       java.nio.channels.FileChannel&nbsp;fileWriteChannel,
                                       <A HREF="../../../../org/jaudiotagger/audio/mp4/atom/Mp4StcoBox.html" title="class in org.jaudiotagger.audio.mp4.atom">Mp4StcoBox</A>&nbsp;stco)
                                throws <A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A>,
                                       java.io.IOException</PRE>
<DL>
<DD>Check File Written Correctly
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rafTemp</CODE> - <DD><CODE>mdatHeader</CODE> - <DD><CODE>fileWriteChannel</CODE> - <DD><CODE>stco</CODE> - 
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/jaudiotagger/audio/exceptions/CannotWriteException.html" title="class in org.jaudiotagger.audio.exceptions">CannotWriteException</A></CODE>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="delete(java.io.RandomAccessFile, java.io.RandomAccessFile)"><!-- --></A><H3>
delete</H3>
<PRE>
public void <B>delete</B>(java.io.RandomAccessFile&nbsp;raf,
                   java.io.RandomAccessFile&nbsp;rafTemp)
            throws java.io.IOException</PRE>
<DL>
<DD>Delete the tag
 <p/>
 <p/>
 <p>This is achieved by writing an empty ilst atom
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>raf</CODE> - <DD><CODE>rafTemp</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/jaudiotagger/audio/mp4/Mp4TagReader.html" title="class in org.jaudiotagger.audio.mp4"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/jaudiotagger/audio/mp4/Mp4TagWriter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Mp4TagWriter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2005-2010 <a href="http://www.java.net/">java.net</a>. All Rights Reserved.
</BODY>
</HTML>
